version: '3.8'
services:
  mlflow:
    image: mlflow_server
    ports:
      - '5000:5000'
    environment:
      - BACKEND_STORE_URI=sqlite:///mlflow.db
      - ARTIFACT_STORE_URI=local:/mlflow/artifacts
    volumes:
      - ./mlflow:/mlflow

  prefect:
    image: prefecthq/prefect
    command: server start --postgres-host postgres --postgres-username your_username --postgres-password your_password --postgres-database your_database_name
    ports:
      - '8080:8080'
    environment:
      - PREFECT_SERVER__GRAPHQL__PLAYGROUND=true

  evidently:
    image: evidently
    ports:
      - '5001:5001'
    volumes:
      - ./evidently:/evidently
    command: api

  postgres:
    image: postgres
    restart: always
    ports:
      - '5432:5432'
    environment:
      - POSTGRES_USER=your_username
      - POSTGRES_PASSWORD=your_password
      - POSTGRES_DB=your_database_name